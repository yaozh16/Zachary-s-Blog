<!DOCTYPE html>
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width"><link rel="stylesheet" type="text/css" media="all" href="../css/article_styles.css"><script type='text/x-mathjax-config'>  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script><script type='text/javascript' src='http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script></head>
<body><div class='content'><h1 id="ROS learning [1]">ROS learning [1]</h1>
<h2 id="ros command">ros command</h2>
<h3 id="rospack">rospack</h3>
rospack find [package_name]
<h3 id="roscd">roscd</h3>
roscd [locationname[/subdir]]
<h3 id="$ROS_PACKAGE_PATH">$ROS_PACKAGE_PATH</h3>
echo $ROS_PACKAGE_PATH
<h3 id="roscd log">roscd log</h3>
file log directory
<h3 id="rosls">rosls</h3>
rosls [locationname[/subdir]]
<h2 id="Create package">Create package</h2>
<h3 id="Create catkin_ws">Create catkin_ws</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>mkdir -p ~/catkin_ws/src
cd ~/catkin_ws/
catkin_make
source devel/setup.bash
echo $ROS_PACKAGE_PATH
</blockquote></pre></div>
<h3 id="Packages in a Catkin Workspace">Packages in a Catkin Workspace</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>workspace_folder/        -- WORKSPACE
  src/                   -- SOURCE SPACE
    CMakeLists.txt       -- &apos;Toplevel&apos; CMake file, provided by catkin
    package_1/
      CMakeLists.txt     -- CMakeLists.txt file for package_1
      package.xml        -- Package manifest for package_1
    ...
    package_n/
      CMakeLists.txt     -- CMakeLists.txt file for package_n
      package.xml        -- Package manifest for package_n
</blockquote></pre></div>
<h3 id="Creating a Catkin Package">Creating a Catkin Package</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>cd ~/catkin_ws/src
<h1 id="example: catkin_create_pkg &amp;lt;package_name&amp;gt; [depend1] [depend2] [depend3]">example: catkin_create_pkg &amp;lt;package_name&amp;gt; [depend1] [depend2] [depend3]</h1>
catkin_create_pkg beginner_tutorials std_msgs rospy roscpp
cd ..
catkin_make
</blockquote></pre></div>
<h3 id="Package Dependency">Package Dependency</h3>
查询直接依赖项
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rospack depends1 beginner_tutorials
</blockquote></pre></div>
以上可以在package.xml中查到

查询所有依赖项
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rospack depends beginner_tutorials
</blockquote></pre></div>
<h3 id="Customizing Your Package">Customizing Your Package</h3>
<h4 id="Customizing the package.xml">Customizing the package.xml</h4><div class="ulRank0"><ul class="ulRank0">1. description tags</ul></div><div class="ulRank0"><ul class="ulRank0">2. maintainer tags</ul></div><div class="ulRank0"><ul class="ulRank0">3. license tags</ul></div>
more at <a class="url" href="http://opensource.org/licenses/alphabetical">Licenses</a><div class="ulRank0"><ul class="ulRank0">4. dependencies tags</ul></div>
more at <a class="url" href="http://wiki.ros.org/catkin/package.xml#Build.2C_Run.2C_and_Test_Dependencies">Dependencies</a>
&emsp;1) build_depend
&emsp;2) buildtool_depend
&emsp;3) exec_depend
&emsp;4) test_depend
<h2 id="Building a ROS Package">Building a ROS Package</h2>
<h3 id="Building Packages">Building Packages</h3>
Using catkin_make
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>catkin_make [make_targets] [-DCMAKE_VARIABLES=...]
</blockquote></pre></div>
<h2 id="Understanding ROS Nodes">Understanding ROS Nodes</h2>
<h3 id="Overview">Overview</h3><div class="liRank0"><li class="liRank0">Nodes: A node is an executable that uses ROS to communicate with other nodes.</li></div>
<div class="liRank0"><li class="liRank0">Messages: ROS data type used when subscribing or publishing to a topic.</li></div>
<div class="liRank0"><li class="liRank0">Topics: Nodes can publish messages to a topic as well as subscribe to a topic to receive messages.</li></div>
<div class="liRank0"><li class="liRank0">Master: Name service for ROS (i.e. helps nodes find each other)</li></div>
<div class="liRank0"><li class="liRank0">rosout: ROS equivalent of stdout/stderr</li></div>
<div class="liRank0"><li class="liRank0">roscore: Master + rosout + parameter server (parameter server will be introduced later)</li></div>
<h3 id="Using rosnode">Using rosnode</h3>
所有node
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosnode list
</blockquote></pre></div>
查看node
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosnode info /rosout
</blockquote></pre></div>
已经关闭的node仍然在表中则可以使用
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosnode cleanup
</blockquote></pre></div>
交互
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosnode ping my_turtle
</blockquote></pre></div>
<h3 id="Using rosrun">Using rosrun</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosrun [package_name] [node_name]
<h1 id="example:">example:</h1>
rosrun turtlesim turtlesim_node
rosrun turtlesim turtle_teleop_key
</blockquote></pre></div><div class="liRank0"><li class="liRank0"><a class="url" href="http://wiki.ros.org/Remapping%20Arguments">remap</a></li></div>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosrun turtlesim turtlesim_node __name:=my_turtle
</blockquote></pre></div>
<h2 id="Understanding ROS Topics">Understanding ROS Topics</h2>
<h3 id="Rqt rqt_graph">Rqt rqt_graph</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosrun rqt_graph rqt_graph
</blockquote></pre></div>
<h3 id="get helps">get helps</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rostopic -h
</blockquote></pre></div>
可以看到
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rostopic type [topic]

rostopic list [-v-h等]

rostopic echo [topic]

rostopic pub [topic] [msg_type] [args]
<h1 id="例如rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist -- &amp;apos;[2.0, 0.0, 0.0]&amp;apos; &amp;apos;[0.0, 0.0, 1.8]&amp;apos;">例如rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist -- &amp;apos;[2.0, 0.0, 0.0]&amp;apos; &amp;apos;[0.0, 0.0, 1.8]&amp;apos;</h1>
</blockquote></pre></div><div class="liRank0"><li class="liRank0">rosmessage</li></div>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosmsg show geometry_msgs/Twist
</blockquote></pre></div>
<h2 id="Understanding ROS Services and Parameters">Understanding ROS Services and Parameters</h2><div class="liRank0"><li class="liRank0">request</li></div><div class="liRank0"><li class="liRank0">response</li></div>
<h3 id="overview">overview</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosservice list         print information about active services
rosservice call         call the service with the provided args
rosservice type         print service type
rosservice find         find services by service type
rosservice uri          print service ROSRPC uri
</blockquote></pre></div>
<h3 id="rosservice type">rosservice type</h3>
查看service与arg类型
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosservice type [service]

<h1 id="可以rosservice type [service]|rossrv show">可以rosservice type [service]|rossrv show</h1>

</blockquote></pre></div>
<h3 id="rosservice call">rosservice call</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosservice call [service] [args]
</blockquote></pre></div>
<h3 id="Using rosparam">Using rosparam</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosparam set [param]            set parameter
rosparam get [param]           get parameter
rosparam dump [file_name] [namespace]     dump params to file
rosparam load [file_name] [namespace]     load params from file
rosparam delete [param]         delete parameter
rosparam list           list parameter names
</blockquote></pre></div>
<h2 id="Using rqt_console and roslaunch">Using rqt_console and roslaunch</h2>
<h3 id="Using Rqt">Using Rqt</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>rosrun rqt_console rqt_console
rosrun rqt_logger_level rqt_logger_level
</blockquote></pre></div>
信息优先级，设置在低级可以接收到上级与自身等级的消息
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>Fatal
Error
Warn
Info
Debug
</blockquote></pre></div>
<h3 id="Using roslaunch">Using roslaunch</h3>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>roslaunch [package] [filename.launch]
</blockquote></pre></div><div class="liRank0"><li class="liRank0">创建launch文件</li></div>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>roscd packagename
<h1 id="这一步如果失败找不到要重新到catkin_ws里面source一下devel/setup.bash">这一步如果失败找不到要重新到catkin_ws里面source一下devel/setup.bash</h1>

roscd beginner_tutorials
mkdir launch
cd launch
</blockquote></pre></div>
创建.launch文件如下
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>&lt;launch&gt;

  &lt;group ns=&quot;turtlesim1&quot;&gt;
    &lt;node pkg=&quot;turtlesim&quot; name=&quot;sim&quot; type=&quot;turtlesim_node&quot;/&gt;
  &lt;/group&gt;

  &lt;group ns=&quot;turtlesim2&quot;&gt;
    &lt;node pkg=&quot;turtlesim&quot; name=&quot;sim&quot; type=&quot;turtlesim_node&quot;/&gt;
  &lt;/group&gt;

  &lt;node pkg=&quot;turtlesim&quot; name=&quot;mimic&quot; type=&quot;mimic&quot;&gt;
    &lt;remap from=&quot;input&quot; to=&quot;turtlesim1/turtle1&quot;/&gt;
    &lt;remap from=&quot;output&quot; to=&quot;turtlesim2/turtle1&quot;/&gt;
  &lt;/node&gt;

&lt;/launch&gt;
</blockquote></pre></div>
其中mimic使得turtlesim2模仿turtlesim1
<h2 id="Using rosed to edit files in ROS">Using rosed to edit files in ROS</h2>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote> rosed [package_name] [filename]
 <h1 id="rosed roscpp Logger.msg">rosed roscpp Logger.msg</h1>
</blockquote></pre></div>
<h2 id="Creating a ROS msg and srv">Creating a ROS msg and srv</h2><div class="liRank0"><li class="liRank0">msg: msg files are simple text files that describe the fields of a ROS message. They are used to generate source code for messages in different languages.</li></div>
<div class="liRank0"><li class="liRank0">srv: an srv file describes a service. It is composed of two parts: a request and a response.</li></div>

<h3 id="steps">steps</h3><div class="ulRank0"><ul class="ulRank0">1. [m/s]write .msg/.srv文件在[package]/msg(srv)目录下</ul></div><div class="ulRank0"><ul class="ulRank0">2. [m]修改package.xml</ul></div>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>&lt;build_depend&gt;message_generation&lt;/build_depend&gt;
&lt;exec_depend&gt;message_runtime&lt;/exec_depend&gt;
</blockquote></pre></div><div class="ulRank0"><ul class="ulRank0">3. [m/s]修改CMakeList.txt共同步骤1</ul></div>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>find_package(catkin REQUIRED COMPONENTS
   roscpp
   rospy
   std_msgs
   message_generation
)
</blockquote></pre></div><div class="ulRank0"><ul class="ulRank0">4. [m]</ul></div>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>catkin_package(
  ...
  CATKIN_DEPENDS message_runtime ...
  ...)

add_message_files(
    FILES
    Num.msg
  )
</blockquote></pre></div><div class="ulRank0"><ul class="ulRank0">5. [s]</ul></div>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>add_service_files(
  FILES
  AddTwoInts.srv
)
</blockquote></pre></div><div class="ulRank0"><ul class="ulRank0">6. [m/s]修改CMakeList.txt共同步骤2</ul></div>
<div class='codeBlock'><pre class='codeBlockPre'><blockquote>generate_messages(
  DEPENDENCIES
  std_msgs
)
</blockquote></pre></div><div class="ulRank0"><ul class="ulRank0">7. [m/s]在catkin_ws中catkin_make install</ul></div>
</div></body>
</html>
